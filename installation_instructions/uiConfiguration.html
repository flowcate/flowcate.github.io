

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeepHub® UI Configuration &#8212; DeepHub® 2022 R1  documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/hub.css" />
    <link rel="stylesheet" type="text/css" href="../_static/root.css" />
    <link rel="stylesheet" type="text/css" href="../_static/header.css" />
    <link rel="stylesheet" type="text/css" href="../_static/index-site.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">DeepHub® 2022 R1</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../overview/index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api_reference/index.html">
  DeepHub® API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../ui/index.html">
  DeepHub® UI
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../demo_access/index.html">
  Accessing Trial Instances
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index.html">
  Running the DeepHub® Locally
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <div class="col-12 col-md-1 col-xl-2 bd-sidebar no-sidebar"></div>
            
          

          
    <div class="d-none d-xl-block col-xl-2 bd-toc"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
        
          
          <div class="toc-item">
            
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-a-floorplan-image-to-the-map">
   Adding a Floorplan Image to the Map
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#displaying-a-floorplan-image-by-itself">
     Displaying a Floorplan Image by Itself
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#displaying-a-floorplan-image-over-a-basemap">
     Displaying a Floorplan Image over a Basemap
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
          </div>
          
          <div class="toc-item">
            
          </div>
          
        
    </div>


          
    

    
        
    

    <main class="col-12 col-md-12 col-xl-10 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
        
        <div>
        
  <div class="section" id="deephub-ui-configuration">
<h1>DeepHub® UI Configuration</h1>
<div class="section" id="adding-a-floorplan-image-to-the-map">
<h2>Adding a Floorplan Image to the Map</h2>
<p>The DeepHub UI can be configured so that a floorplan image of a building or a site can be displayed. You may choose to display the image by itself, or overlayed on top of the basemap of the mapping service provider (ex. MapTiler).</p>
<p>To begin, you will need to determine the latitude and longitude of your floorplan images’ corners.</p>
<p>Once this is done, navigate to the ‘/hub-web/nginx/webapp’ directory of your DeepHub bundle on your local filesystem. Create a new directory (ex. named ‘floorplan-image’) and add your floorplan image to this directory.</p>
<p>Next, download the Open Sans Semibold font by cloning <a class="reference external" href="https://github.com/openmaptiles/fonts">this repository</a> to your local filesystem. Follow the steps in the README.md to install the required packages and generate the fonts. The fonts will be in the ‘_output’ directory.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>user@fc:~/projects/fonts/_output$ ls
&#39;Metropolis Black&#39;               &#39;Metropolis Light&#39;             &#39;Metropolis Thin&#39;         &#39;Open Sans Extra Bold Italic&#39;  &#39;PT Sans Bold Italic&#39;       &#39;Roboto Black Italic&#39;            &#39;Roboto Condensed Regular&#39;  &#39;Roboto Thin Italic&#39;
&#39;Metropolis Black Italic&#39;        &#39;Metropolis Light Italic&#39;      &#39;Metropolis Thin Italic&#39;  &#39;Open Sans Italic&#39;             &#39;PT Sans Caption Regular&#39;   &#39;Roboto Bold&#39;                    &#39;Roboto Italic&#39;
&#39;Metropolis Bold&#39;                &#39;Metropolis Medium&#39;            &#39;Noto Sans Bold&#39;          &#39;Open Sans Light&#39;              &#39;PT Sans Caption Web Bold&#39;  &#39;Roboto Bold Italic&#39;             &#39;Roboto Light&#39;
&#39;Metropolis Bold Italic&#39;         &#39;Metropolis Medium Italic&#39;     &#39;Noto Sans Italic&#39;        &#39;Open Sans Light Italic&#39;       &#39;PT Sans Italic&#39;            &#39;Roboto Condensed Bold&#39;          &#39;Roboto Light Italic&#39;
&#39;Metropolis Extra Bold&#39;          &#39;Metropolis Regular&#39;           &#39;Noto Sans Regular&#39;       &#39;Open Sans Regular&#39;            &#39;PT Sans Narrow Bold&#39;       &#39;Roboto Condensed Bold Italic&#39;   &#39;Roboto Medium&#39;
&#39;Metropolis Extra Bold Italic&#39;   &#39;Metropolis Regular Italic&#39;    &#39;Open Sans Bold&#39;          &#39;Open Sans Semibold&#39;           &#39;PT Sans Narrow Regular&#39;    &#39;Roboto Condensed Italic&#39;        &#39;Roboto Medium Italic&#39;
&#39;Metropolis Extra Light&#39;         &#39;Metropolis Semi Bold&#39;         &#39;Open Sans Bold Italic&#39;   &#39;Open Sans Semibold Italic&#39;    &#39;PT Sans Regular&#39;           &#39;Roboto Condensed Light&#39;         &#39;Roboto Regular&#39;
&#39;Metropolis Extra Light Italic&#39;  &#39;Metropolis Semi Bold Italic&#39;  &#39;Open Sans Extra Bold&#39;    &#39;PT Sans Bold&#39;                 &#39;Roboto Black&#39;              &#39;Roboto Condensed Light Italic&#39;  &#39;Roboto Thin&#39;
</pre></div>
</div>
<p>Within your newly-created ‘floorplan-image’ directory, create a new directory named ‘fonts’. Copy the ‘Open Sans Semibold’ font from the repository you just cloned to this new ‘fonts’ directory.</p>
<div class="section" id="displaying-a-floorplan-image-by-itself">
<h3>Displaying a Floorplan Image by Itself</h3>
<p>Create a JSON file in your ‘floorplan-image’ directory that defines your map style. To display the floorplan image without the surrounding basemap, your file must be structured like the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;floorplan-style&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Floorplan Style&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attribution&quot;</span><span class="p">:</span> <span class="s2">&quot;Floorplan map&quot;</span><span class="p">,</span>
    <span class="nt">&quot;glyphs&quot;</span><span class="p">:</span> <span class="s2">&quot;floorplan-image/fonts/{fontstack}/{range}.pbf&quot;</span><span class="p">,</span>
    <span class="nt">&quot;sources&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;floorplan-image/&lt;YOUR FLOORPLAN IMAGE FILE&gt;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
            <span class="mf">-115.16786551712569</span><span class="p">,</span>
            <span class="mf">36.11988219161837</span>
            <span class="p">],</span>
            <span class="p">[</span>
            <span class="mf">-115.1654992</span><span class="p">,</span>
            <span class="mf">36.119895</span>
            <span class="p">],</span>
            <span class="p">[</span>
            <span class="mf">-115.1649202</span><span class="p">,</span>
            <span class="mf">36.118001</span>
            <span class="p">],</span>
            <span class="p">[</span>
            <span class="mf">-115.1684502</span><span class="p">,</span>
            <span class="mf">36.118023</span>
            <span class="p">]</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
        <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;background-color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(0,0,0,0)&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;image-layer&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
        <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;raster-fade-duration&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to change the coordinates in your JSON file to match the coordinates of your floorplan images’ corners. The first coordinate corresponds to the top left corner of the image, the 2nd coordinate corresponds to the top right corner of the image, etc.</p>
</div>
<p>Finally, the ‘deephub-ui’ service within the docker-compose.yml file of your DeepHub instance needs to be modified:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set DOCKER_MAP_DEFAULT_STYLE=floorplan-image/&lt;YOUR MAP STYLE JSON FILE&gt;</p></li>
<li><p>Ensure that the “./hub-web/nginx/webapp/” volume on your local filesystem is mounted to “/webapp” of the Docker container</p></li>
</ul>
</div></blockquote>
<p>Start your DeepHub instance by invoking Docker Compose. When you open the DeepHub UI in your browser, you will need to modify the URL by including one pair of latitude and longitude coordinates. For example, to navigate to the location of the floorplan image in the example above, the following URL would be used:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>http://localhost:8081/deephub-ui/map/system/live/<span class="o">(</span>show//left:list<span class="o">)</span>?lng<span class="o">=</span>-115.16786551712569<span class="p">&amp;</span><span class="nv">lat</span><span class="o">=</span><span class="m">36</span>.11988219161837<span class="p">&amp;</span><span class="nv">zoom</span><span class="o">=</span><span class="m">17</span>
</pre></div>
</div>
<img alt="../_images/floorplan_alone.png" src="../_images/floorplan_alone.png" />
</div>
<div class="section" id="displaying-a-floorplan-image-over-a-basemap">
<h3>Displaying a Floorplan Image over a Basemap</h3>
<p>To display your floorplan image on top of a basemap from a mapping service provider, you will need to modify your JSON file above, or create a new one.</p>
<p>Combine the properties associated with your floorplan image with the map style JSON of the mapping service provider. By default, MapTiler is used as the mapping service provider with this map style: <a class="reference external" href="https://api.maptiler.com/maps/bright/style.json">https://api.maptiler.com/maps/bright/style.json</a>.</p>
<p>In addition, you will need to ensure that the docker-compose.yml file of your DeepHub instance has the correct value for DOCKER_MAP_DEFAULT_STYLE. This environment variable should point to the location of the updated map style JSON file on your local filesystem. For example:</p>
<blockquote>
<div><ul class="simple">
<li><p>DOCKER_MAP_DEFAULT_STYLE=floorplan-image/&lt;YOUR UPDATED MAP STYLE JSON FILE&gt;</p></li>
</ul>
</div></blockquote>
<img alt="../_images/floorplan_basemap.png" src="../_images/floorplan_basemap.png" />
</div>
</div>
</div>


        </div>
        
        
    </main>


      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 Flowcate.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>